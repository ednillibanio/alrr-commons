<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:kmdr="http://java.sun.com/jsf/composite/components/commons"
	xmlns:o="http://omnifaces.org/ui">

	<o:importConstants type="br.kmdr.util.domain.Mes" />
	<o:importConstants type="br.kmdr.util.domain.FeriadoType" />


	<p:dialog widgetVar="_dlgFeriadoEditar" modal="true"
		id="dlgFeriadoEditar" resizable="false" closable="false"
		closeOnEscape="true" showHeader="false" responsive="true"
		appendTo="@(body)">

		<h:form id="frmFeriadoEditar">

			<p:messages id="msg-dialog-editar" globalOnly="true" />
			<p:panel id="pnl-editar"
				header="#{bundle_com['feriado.dialog.header.editar']}">
				<div class="ui-fluid">
					<p:panelGrid columns="2"
						styleClass="ui-panelgrid-blank ui-responsive"
						rendered="#{not empty feriadoController.entity }">


						<!-- TIPO FERIADO -->
						<p:outputLabel for="etipo"
							value="#{bundle_com['feriado.label.tipo.feriado']}"
							title="#{bundle_com['feriado.label.tipo.feriado']}" />
						<p:outputPanel>
							<p:selectOneButton id="etipo"
								converter="omnifaces.GenericEnumConverter"
								value="#{feriadoController.entity.tipo}" required="true">

								<f:selectItems value="#{commonsEnumFactory.tiposFeriados}"
									var="tipos" itemValue="#{tipos}" itemLabel="#{tipos.label}" />
								<p:ajax event="change" update="locuf1,locuf2, locmun1, locmun2" />
							</p:selectOneButton>
							<p:message for="etipo" display="tooltip" />
						</p:outputPanel>

						<!-- NOME -->
						<p:outputLabel value="Nome" for="enome" />
						<p:outputPanel>
							<p:inputText id="enome" value="#{feriadoController.entity.nome}"
								maxlength="150" required="true" />
							<p:message for="enome" display="tooltip" />
						</p:outputPanel>

						<!-- DIA -->
						<p:outputLabel value="#{bundle_com['feriado.label.dia']}"
							for="edia" />
						<p:outputPanel>
							<p:inputText id="edia" value="#{feriadoController.entity.dia}"
								maxlength="2" size="5" required="true" validator="diaValidator" />
							<p:message for="edia" display="tooltip" />
						</p:outputPanel>

						<!-- MES -->
						<p:outputLabel value="#{bundle_com['feriado.label.mes']}"
							for="emes" />
						<p:outputPanel>
							<p:selectOneMenu value="#{feriadoController.entity.mes}"
								id="emes" converter="omnifaces.GenericEnumConverter">
								<f:selectItems value="#{commonsEnumFactory.meses}" var="_mes"
									itemValue="#{_mes}" itemLabel="#{_mes.label}" />
							</p:selectOneMenu>
							<p:message for="emes" display="tooltip" />
						</p:outputPanel>

						<!-- CASO TIPOFERIADO = ESTADUAL -->
						<p:outputPanel id="locuf1">
							<p:outputLabel value="#{bundle_com['feriado.label.uf']}"
								for="euf"
								rendered="#{feriadoController.entity.tipo eq 'ESTADUAL'}" />
						</p:outputPanel>
						<p:outputPanel id="locuf2">
							<p:selectOneMenu id="euf" value="#{feriadoController.entity.uf}"
								label="#{bundle_com['feriado.label.uf']}" required="true"
								converter="omnifaces.GenericEnumConverter"
								rendered="#{feriadoController.entity.tipo eq 'ESTADUAL'}">
								<f:selectItems value="#{commonsEnumFactory.ufs}" var="uf"
									itemValue="#{uf}" itemLabel="#{uf}" />
							</p:selectOneMenu>
							<p:message for="euf" display="tooltip" />
						</p:outputPanel>


						<!-- CASO TIPOFERIADO = MUNICIPAL -->
						<p:outputPanel id="locmun1">
							<p:outputLabel value="#{bundle_com['feriado.label.localidade']}"
								for="eloc"
								rendered="#{feriadoController.entity.tipo eq 'MUNICIPAL'}" />
						</p:outputPanel>
						<p:outputPanel id="locmun2">
							<p:autoComplete id="eloc"
								value="#{feriadoController.entity.localidade}" required="true"
								completeMethod="#{localidadeCompleteController.completeByNome}"
								var="loc" itemLabel="#{loc.nome.concat(' - ').concat(loc.uf)}"
								itemValue="#{loc}" converter="#{entityConverter}"
								forceSelection="true" minQueryLength="3" maxResults="8"
								size="40" label="#{bundle_com['feriado.label.localidade']}"
								rendered="#{feriadoController.entity.tipo eq 'MUNICIPAL'}">
								<p:column>
								#{loc.nome} - #{loc.uf}
							</p:column>
							</p:autoComplete>
							<p:message for="eloc" display="tooltip" />
						</p:outputPanel>
					</p:panelGrid>
				</div>

				<f:facet name="footer">
					<center>
						<p:commandButton id="btn-salvar"
							value="#{bundle_app['botao.salvar']}" icon="ui-icon-disk"
							actionListener="#{feriadoController.salvar()}"
							process="frmFeriadoEditar @this"
							update="frmFeriadoEditar frmFeriadoPesquisar" />
						<p:spacer width="8" />
						<p:commandButton id="btn-fechar"
							value="#{bundle_app['botao.fechar']}" icon="ui-icon-circle-close"
							immediate="true" oncomplete="PF('_dlgFeriadoEditar').hide()" />
					</center>
				</f:facet>
			</p:panel>
		</h:form>
	</p:dialog>

</ui:composition>
